// ================================================base function
function areyousure (_type, _value = '') {
  (new PNotify({
    title: MESSAGE,
    text: AREYOUSURE,
    icon: 'fa fa-check-square-o fa-5x ',
    hide: false,
    confirm: {
      confirm: true,
      buttons: [{
        text: YES,
        addClass: 'btn-primary',
        click: function (notice) {
          $(location).attr('href', _value)
        }
      },
        {
          text: CANCEL,
          addClass: 'btn',
          click: function (notice) {
            notice.remove()
          }

        }
      ]
    },
    buttons: {
      closer: false,
      sticker: false
    },
    history: {
      history: false
    },
    addclass: 'stack-modal',
    stack: {
      'dir1': 'down',
      'dir2': 'right',
      'modal': true
    }
  })).get().on('pnotify.confirm', function () {}).on('pnotify.cancel', function () {})
}
// popup for cofirm cando
function piero_confirm (_func, _param) {
  (new PNotify({
    title: MESSAGE,
    text: AREYOUSURE,
    icon: 'fa fa-check-square-o fa-5x ',
    hide: false,
    confirm: {
      confirm: true,
      buttons: [{
        text: 'YES',
        addClass: 'btn-primary',
        click: function (notice) {
          notice.remove()
          _func(_param)
        }
      },
        {
          text: CANCEL,
          addClass: 'btn',
          click: function (notice) {
            notice.remove()
          }
        }
      ]
    },
    buttons: {
      closer: false,
      sticker: false
    },
    history: {
      history: false
    },
    addclass: 'stack-modal',
    stack: {
      'dir1': 'down',
      'dir2': 'right',
      'modal': true
    }
  }))
}

// message defult system
function piero_message (_title = __ , _text = SUCOP) {
  new PNotify({
    title: _title,
    text: _text,
    type: 'success',
    addclass: 'stack-topleft',
    stack: stack_topleft
  })
}

// slide toggle menu for mobile
function side_menu_toggle () {
  $('.piero-menu').toggle(100)
}
// pnotfiy alert
var stack_topleft = {
  'dir1': 'down',
  'dir2': 'right',
  'push': 'top'
}

function piero_alert (_title = ERROR , _text = ERRORININPUTPARAMS) {
  new PNotify({
    title: _title,
    text: _text,
    type: 'error',
    addclass: 'stack-topleft',
    stack: stack_topleft
  })
}
// ================================================popup function start
function load_ajax_popup (_url, _data = '') {
  $('#ajax_body').html("<div class='loading' > </div>")
  $('#myModal').modal('show')
  var xhttp = new XMLHttpRequest()
  xhttp.onreadystatechange = function () {
    //                    alert(xhttp.readyState )
    if (xhttp.readyState == 4) {
      $('#ajax_body').html(xhttp.responseText)
    }
  }
  xhttp.open('POST', _url, true)
  xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
  xhttp.send(_data)
}

function load_ajax_popupfull (_url, _data = '') {
  if (_data == '')
    _data = 'noheader=true'
  else
    _data = _data + '&noheader=true'

  $('#ajax_bodyfull').html("<div class='loading' > </div>")

  $('.mdlfull').css('width', '90%')

  $('#myModalfull').modal('show')

  var xhttp = new XMLHttpRequest()
  xhttp.onreadystatechange = function () {
    //                    alert(xhttp.readyState )
    if (xhttp.readyState == 4) {
      $('#ajax_bodyfull').html(xhttp.responseText)
    }
  }
  xhttp.open('POST', _url, true)
  xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
  xhttp.send(_data)
}

function load_ajax(_url, _element, _data = '' , _type = 'normal') {
  $(_element).html("<div class='loading' > </div>")
  var xhttp = new XMLHttpRequest()
  xhttp.onreadystatechange = function () {
    if (xhttp.readyState == 4) {
      $(_element).html(xhttp.responseText)
    }
  }
  xhttp.open('POST', _url, true)
  xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
  xhttp.send(_data)
}
// ================================================popup function end
// ================================================print start
function printp (_elem_print) {
  var divToPrint = document.getElementById(_elem_print)
  var newWin = window.open('', 'Print-Window')
  newWin.document.open()
  newWin.document.write('<html> <head> ' + PRINTCSS + ' </head>   <body onload="window.print()">' + PRINTLOGO + divToPrint.innerHTML + '</body></html>')
  newWin.document.close()
}
// ================================================print end

function b64DecodeUnicode(str) {
  // Going backwards: from bytestream, to percent-encoding, to original string.
  return decodeURIComponent(atob(str).split('').map(function (c) {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));
}